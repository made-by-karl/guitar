<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" routerLink="/song-sheets" (click)="closeNavbar()">
      <i class="bi bi-guitar me-2"></i> {{ title }}
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar" aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="mainNavbar">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0 w-100">
        <li class="nav-item">
          <a class="nav-link d-flex align-items-center" routerLink="/song-sheets" routerLinkActive="active" (click)="closeNavbar()">
            <i class="bi bi-music-note-list me-1"></i> Song Sheets
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link d-flex align-items-center" routerLink="/chord" routerLinkActive="active" (click)="closeNavbar()">
            <i class="bi bi-music-note-beamed me-1"></i> Chords
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link d-flex align-items-center" routerLink="/rhythm-patterns" routerLinkActive="active" (click)="closeNavbar()">
            <i class="bi bi-arrow-down-up me-1"></i> Rhythm Patterns
          </a>
        </li>
        <li class="d-lg-none"><hr class="dropdown-divider"></li>
        <li class="nav-item d-lg-none">
          <a class="nav-link d-flex align-items-center" routerLink="/settings" (click)="closeNavbar()">
            <i class="bi bi-gear me-2"></i>Settings
          </a>
        </li>
        <li class="nav-item d-lg-none">
          <a class="nav-link d-flex align-items-center" routerLink="/midi-test" (click)="closeNavbar()">
            <i class="bi bi-volume-up me-2"></i>MIDI Test
          </a>
        </li>
      </ul>
      <ul class="navbar-nav ms-auto d-none d-lg-flex">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" id="moreMenu" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-list"></i>
          </a>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="moreMenu">
            <li><a class="dropdown-item" routerLink="/settings" (click)="closeNavbar()"><i class="bi bi-gear me-2"></i>Settings</a></li>
            <li><a class="dropdown-item" routerLink="/midi-test" (click)="closeNavbar()"><i class="bi bi-volume-up me-2"></i>MIDI Test</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="pinned-sheet-bar">
  <div class="container d-flex align-items-center py-2">
    <i class="bi bi-pin-angle me-2"></i>
    <span class="fw-bold me-2">Pinned Sheet:</span>
    <select class="form-select w-auto me-2" [(ngModel)]="pinnedSheetId" (ngModelChange)="onPinnedSheetChange($event)">
      <option [ngValue]="null">(None)</option>
      <option *ngFor="let sheet of songSheetsService.getAll()" [ngValue]="sheet.id">{{ sheet.name }}</option>
    </select>
    <button *ngIf="pinnedSongSheet" class="btn btn-outline-primary btn-sm" (click)="navigateToPinnedSheet()" title="Go to song sheet details">
      <i class="bi bi-arrow-right-circle me-1"></i>View
    </button>
  </div>
</div>

<div class="app-content-container">
  <router-outlet></router-outlet>
</div>

<!-- Global Dialog Component -->
<app-dialog></app-dialog>
